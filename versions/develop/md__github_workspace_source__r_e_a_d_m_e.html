<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Libraries: Core Libraries</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Control Libraries<span id="projectnumber">&#160;6.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Core Libraries </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code></h1>
<p >This library provides a set of classes to represent <b>states</b> in <b>Cartesian</b> or <b>joint</b> space. The classes define and combine variables such as position, velocity, acceleration and force into a consistent internal representation used across the other libraries.</p>
<p >Source: <a href="./state_representation">state_representation</a></p>
<p >Dependencies: <a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen3</a></p>
<hr  />
<h1><code><a class="el" href="namespacedynamical__systems.html" title="Systems of equations relating state variables to their derivatives.">dynamical_systems</a></code></h1>
<p >This library provides a collection of classes that behave as differential equations to calculate a derivative of a state variable. For example, a position state input might yield a desired velocity output. This can be used to generate time-invariant trajectories.</p>
<p >Source: <a href="./dynamical_systems">dynamical_systems</a></p>
<p >Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code></p>
<hr  />
<h1><code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code></h1>
<p >This library allows the creation of a robot model from a URDF file and defines many helpful rigid-body algorithms for solving kinematic and dynamic problems.</p>
<p >It is a wrapper for <a href="https://github.com/stack-of-tasks/pinocchio">Pinocchio</a> that is compatible with the internal <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code> types.</p>
<p >Source: <a href="./robot_model">robot_model</a></p>
<p >Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code>, <a href="https://stack-of-tasks.github.io/pinocchio/download.html">Pinocchio</a></p>
<hr  />
<h1><code>controllers</code></h1>
<p >This library provides classes designed to convert an input state to an output command in order to control a robot.</p>
<p >Source: <a href="./controllers">controllers</a></p>
<p >Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code>, <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code></p>
<hr  />
<h1>Installation</h1>
<h2>Supported platforms</h2>
<p >These libraries have been developed and tested on Linux Ubuntu 18.04 and 20.04. They should also work on macOS and Windows, though the installation steps may differ. At this time no guarantees are made for library support on non-Linux systems.</p>
<h2>Installation with the install script</h2>
<p >This project uses CMake to generate static library objects for each of the modules.</p>
<p >To facilitate the installation process, an <a href="./install.sh">install script</a> is provided. Users who are interested in the manual installation steps and/or have already installed Pinocchio refer to the manual installation steps in the next section.</p>
<p >The install script takes care of all the installation steps, including the installation and configuration of Pinocchio. It can be run with several optional arguments:</p><ul>
<li><code>-y</code>, <code>--auto</code>: Any input prompts will be suppressed and install steps automatically approved.</li>
<li><code>-d [path]</code>, <code>--dir [path]</code>: If provided, the installation directory will be changed to <code>[path]</code>.</li>
<li><code>--no-controllers</code>: The controllers library will be excluded from the installation.</li>
<li><code>--no-dynamical-systems</code>: The dynamical systems library will be excluded from the installation.</li>
<li><code>--no-robot-model</code>: The robot model library, and therefore Pinocchio, will be excluded from the installation.</li>
<li><code>--build-tests</code>: The unittest targets will be included in the installation.</li>
<li><code>--clean</code>: Any previously installed header files from <code>/usr/local/include</code> and any shared library files from <code>/usr/local/lib</code> will be deleted before the installation.</li>
<li><code>--cleandir [path]</code>: Any previously installed header files shared library files from <code>[path]</code> will be deleted before the installation.</li>
</ul>
<h2>Manual installation steps</h2>
<p >Eigen3 (release <a href="https://gitlab.com/libeigen/eigen/-/releases/3.4.0">3.4.0</a>) is required for building <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code> and all other libraries. You can install it with: </p><div class="fragment"><div class="line">wget -c https://gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.tar.gz -O - | tar -xz</div>
<div class="line">cd eigen-3.4.0 &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make install</div>
<div class="line">cd ../.. &amp;&amp; rm -r eigen-3.4.0</div>
</div><!-- fragment --><p >Pinocchio is required for building the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code> library. Installing this requires some additional steps; see the <a href="./install.sh">install script</a> for reference. If the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code> library is not needed, you can skip the installation of Pinocchio.</p>
<p >Once the dependencies are installed, build and install the libraries by navigating to the source folder and invoking <code>cmake</code> and <code>make</code> as shown below. The library files are installed to <code>usr/local/lib</code>, and the library header files are copied to <code>/usr/local/include</code>.</p>
<div class="fragment"><div class="line">cd control-libraries/source</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line">make -j</div>
<div class="line">make install</div>
</div><!-- fragment --><p >The CMake configuration flags <code>BUILD_CONTROLLERS</code>, <code>BUILD_DYNAMICAL_SYSTEMS</code> and <code>BUILD_ROBOT_MODEL</code> determine which libraries are built, and are all defined as <code>ON</code> by default. The building of the <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code> library cannot be disabled, as all other libraries depend on it.</p>
<p >To selectively disable the build of a particular library, set the flag to <code>=OFF</code>. For example, the following flags will prevent the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code> library from being built, which is useful if the Pinocchio dependency is not fulfilled on your system.</p>
<div class="fragment"><div class="line">cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_ROBOT_MODEL=OFF ..</div>
</div><!-- fragment --><p >To also build the library tests, add the CMake flag <code>-DBUILD_TESTING=ON</code>. This requires GTest to be installed on your system. You can then use <code>make test</code> to run all test targets.</p>
<p >Alternatively, you can include the source code for each library as submodules in your own CMake project, using the CMake directive <code>add_subdirectory(...)</code> to link it with your project.</p>
<h1>Usage in a cmake project</h1>
<p >If you have a target library or executable <code>my_target</code>, you can link all required libraries and include directories automatically with the following commands in the CMakeLists file:</p>
<div class="fragment"><div class="line">find_package(control_libraries [VERSION] CONFIG REQUIRED)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(my_target ${control_libraries_LIBRARIES})</div>
</div><!-- fragment --><p ><code>VERSION</code> is an optional version number such as <code>5.0.0</code>, which should be included for safety. If the installed control libraries version has a different major increment (for example, <code>4.1.0</code> compared to <code>5.0.0</code>), cmake will give the according error.</p>
<p >The <code>CONFIG</code> flag tells cmake to directly search for a <code>control_librariesConfig.cmake</code> file, which is installed as part of the package. It is not required but makes the cmake search algorithm slightly more efficient.</p>
<p >The <code>REQUIRED</code> flag will give an error if the package is not found, which just prevents build errors from happening at later stages.</p>
<h2>Advanced specification</h2>
<p >For more fine control in checking required components when importing control libraries, it is possible to supply the individual required libraries to the end of the <code>find_package</code> directive. The default behaviour is to include all installed components.</p>
<p >If all components are installed but only the <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects.">state_representation</a></code> library is needed for a certain project, then it is a good idea to only find that component. Note however that for components specified at the find_package step, the linked libraries must also be specified from that subset, and not from the <code>${control_libraries_LIBRARIES}</code>variable.</p>
<div class="fragment"><div class="line"># only find dependencies for the state_representation library</div>
<div class="line">find_package(control_libraries 5.0.0 CONFIG REQUIRED state_representation)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(my_target state_representation)</div>
</div><!-- fragment --><p >The other usage for listing COMPONENTS during <code>find_package</code> is to confirm that those components are indeed installed, and to abort the cmake configuration early if the required component was not found (for example, when the control libraries installation selectively disabled the <code>controllers</code> library).</p>
<p >Additional <code>OPTIONAL_COMPONENTS</code> can also be appended, which will silently check if they are installed without aborting. This is generally not needed.</p>
<div class="fragment"><div class="line"># ensure that both `dynamical_systems` and `robot_model` are installed and available</div>
<div class="line">find_package(control_libraries 5.0.0 CONFIG REQUIRED dynamical_systems robot_model)</div>
<div class="line"> </div>
<div class="line"># ensure that the `controllers` library is available, and also check for dynamical_systems in the background</div>
<div class="line">find_package(control_libraries 5.0.0 CONFIG REQUIRED controllers OPTIONAL_COMPONENTS dynamical_systems)</div>
</div><!-- fragment --><h2><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a> and Pinocchio</h2>
<p >If the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics.">robot_model</a></code> library is used and <code>pinocchio</code> has been installed to a location that is not on the default include and link paths, that location must also be provided. The default installation of <code>pinocchio</code> is at <code>/opt/openrobots</code>. For this reason it is normal to add the following lines to the CMakeLists file:</p>
<div class="fragment"><div class="line">list(APPEND CMAKE_PREFIX_PATH /opt/openrobots)</div>
<div class="line">include_directories(/opt/openrobots/include)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
