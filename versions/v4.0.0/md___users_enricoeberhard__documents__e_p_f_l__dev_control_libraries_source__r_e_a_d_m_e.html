<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Control Libraries: Core Libraries</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Control Libraries
   &#160;<span id="projectnumber">4.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Core Libraries </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code></h2>
<p>This library provides a set of classes to represent <b>states</b> in <b>Cartesian</b> or <b>joint</b> spaces. The classes define and combine variables such as position, velocity, acceleration and force into a consistent internal representation used across the other libraries.</p>
<p>Source: <a href="./state_representation">state_representation</a></p>
<p>Dependencies: <a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen3</a> </p><hr/>
<h2><code><a class="el" href="namespacedynamical__systems.html" title="Systems of equations relating state variables to their derivatives. ">dynamical_systems</a></code></h2>
<p>This library provides a collection of classes that behave as differential equations to calculate a derivative of a state variable. For example, a position state input might yield a desired velocity output. This can be used to generate time-invariant trajectories.</p>
<p>Source: <a href="./dynamical_systems">dynamical_systems</a></p>
<p>Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code> </p><hr/>
<h2><code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics. ">robot_model</a></code></h2>
<p>This library allows the creation of a robot model from a URDF file and defines many helpful rigid-body algorithms for solving kinematic and dynamic problems.</p>
<p>It is a wrapper for <a href="https://github.com/stack-of-tasks/pinocchio">Pinocchio</a> that is compatible with the internal <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code> types.</p>
<p>Source: <a href="./robot_model">robot_model</a></p>
<p>Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code>, <a href="https://stack-of-tasks.github.io/pinocchio/download.html">Pinocchio</a> </p><hr/>
<h2><code>controllers</code></h2>
<p>This library provides classes designed to convert an input state to an output command in order to control a robot.</p>
<p>Source: <a href="./controllers">controllers</a></p>
<p>Dependencies: <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code> </p><hr/>
<h2>Installation</h2>
<h3>Supported platforms</h3>
<p>These libraries have been developed and tested on Linux Ubuntu 18.04 and 20.04. They should also work on macOS and Windows, though the installation steps may differ. At this time no guarantees are made for library support on non-Linux systems.</p>
<h3>Installation with the install script</h3>
<p>This project uses CMake to generate static library objects for each of the modules.</p>
<p>To facilitate the installation process, an <a href="./install.sh">install script</a> is provided. Users who are interested in the manual installation steps and/or have already installed Pinocchio refer to the <a href="#manual-installation-steps">manual installation steps</a> in the next section.</p>
<p>The install script takes care of all the installation steps, including the installation and configuration of Pinocchio. It can be run with several optional arguments:</p><ul>
<li><code>-y</code>, <code>--auto</code>: Any input prompts will be suppressed and install steps automatically approved.</li>
<li><code>-d [path]</code>, <code>--dir [path]</code>: If provided, the installation directory will be changed to <code>[path]</code>.</li>
<li><code>--no-controllers</code>: The controllers library will be excluded from the installation.</li>
<li><code>--no-dynamical-systems</code>: The dynamical systems library will be excluded from the installation.</li>
<li><code>--no-robot-model</code>: The robot model library, and therefore Pinocchio, will be excluded from the installation.</li>
<li><code>--build-tests</code>: The unittest targets will be included in the installation.</li>
<li><code>--clean</code>: Any previously installed header files from <code>/usr/local/include</code> and any shared library files from <code>/usr/local/lib</code> will be deleted before the installation.</li>
<li><code>--cleandir [path]</code>: Any previously installed header files shared library files from <code>[path]</code> will be deleted before the installation.</li>
</ul>
<h3>Manual installation steps</h3>
<p>Eigen3 is required for building <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code> and all other libraries. You can install it with: </p><div class="fragment"><div class="line">apt-get install libeigen3-dev</div></div><!-- fragment --><p>Pinocchio is required for building the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics. ">robot_model</a></code> library. Installing this requires some additional steps; see the <a href="./install.sh">install script</a> for reference. If the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics. ">robot_model</a></code> library is not needed, you can skip the installation of Pinocchio.</p>
<p>Once the dependencies are installed, build and install the libraries by navigating to the source folder and invoking <code>cmake</code> and <code>make</code> as shown below. The library files are installed to <code>usr/local/lib</code>, and the library header files are copied to <code>/usr/local/include</code>.</p>
<div class="fragment"><div class="line">cd control-libraries/source</div><div class="line">mkdir build &amp;&amp; cd build</div><div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div><div class="line">make -j</div><div class="line">make install</div></div><!-- fragment --><p>The CMake configuration flags <code>BUILD_CONTROLLERS</code>, <code>BUILD_DYNAMICAL_SYSTEMS</code> and <code>BUILD_ROBOT_MODEL</code> determine which libraries are built, and are all defined as <code>ON</code> by default. The building of the <code><a class="el" href="namespacestate__representation.html" title="Core state variables and objects. ">state_representation</a></code> library cannot be disabled, as all other libraries depend on it.</p>
<p>To selectively disable the build of a particular library, set the flag to <code>=OFF</code>. For example, the following flags will prevent the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics. ">robot_model</a></code> library from being built, which is useful if the Pinocchio dependency is not fulfilled on your system.</p>
<div class="fragment"><div class="line">cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_ROBOT_MODEL=OFF ..</div></div><!-- fragment --><p>To also build the library tests, add the CMake flag <code>-DBUILD_TESTING=ON</code>. This requires GTest to be installed on your system. You can then use <code>make test</code> to run all test targets.</p>
<p>Alternatively, you can include the source code for each library as submodules in your own CMake project, using the CMake directive <code>add_subdirectory(...)</code> to link it with your project.</p>
<h2>Troubleshooting</h2>
<p>This section lists common problems that might come up when using the <code>control-libraries</code> modules.</p>
<h3>Boost container limit compile error in ROS</h3>
<p>When using the <code><a class="el" href="namespacerobot__model.html" title="Robot kinematics and dynamics. ">robot_model</a></code> module in ROS and trying to <code>catkin_make</code> the workspace, it might produce the following error: </p><div class="fragment"><div class="line">/opt/openrobots/include/pinocchio/container/boost-container-limits.hpp:29:7: error: #error &quot;BOOST_MPL_LIMIT_LIST_SIZE value is lower than the value of PINOCCHIO_BOOST_MPL_LIMIT_CONTAINER_SIZE&quot;</div><div class="line">#23 2.389    29 |     # error &quot;BOOST_MPL_LIMIT_LIST_SIZE value is lower than the value of PINOCCHIO_BOOST_MPL_LIMIT_CONTAINER_SIZE&quot;</div></div><!-- fragment --><p> In order to avoid this error and successfully <code>catkin_make</code> the workspace, make sure that the <code>CMakeList.txt</code> of the ROS package contains all the necessary directives, i.e. on top of </p><div class="fragment"><div class="line">list(APPEND CMAKE_PREFIX_PATH /opt/openrobots)</div><div class="line">find_package(Eigen3 REQUIRED)</div><div class="line">find_package(pinocchio REQUIRED)</div><div class="line">find_package(OsqpEigen REQUIRED)</div><div class="line">find_package(osqp REQUIRED)</div><div class="line"></div><div class="line">find_library(state_representation REQUIRED)</div><div class="line">find_library(dynamical_systems REQUIRED)</div><div class="line">find_library(controllers REQUIRED)</div><div class="line">find_library(robot_model REQUIRED)</div><div class="line">...</div><div class="line">include_directories(</div><div class="line">    ${catkin_INCLUDE_DIRS}</div><div class="line">    ${Eigen3_INCLUDE_DIRS}</div><div class="line">    ${STATE_REPRESENTATION_INCLUDE_DIR}</div><div class="line">    ${DYNAMICAL_SYSTEMS_INCLUDE_DIR}</div><div class="line">    ${ROBOT_MODEL_INCLUDE_DIR}</div><div class="line">    ${CONTROLLERS_INCLUDE_DIR}</div><div class="line">    ${PINOCCHIO_INCLUDE_DIR}</div><div class="line">    ${OsqpEigen_INCLUDE_DIR}</div><div class="line">    /opt/openrobots/include</div><div class="line">)</div></div><!-- fragment --><p> it should also have </p><div class="fragment"><div class="line">find_package(Boost REQUIRED COMPONENTS system)</div><div class="line">add_compile_definitions(BOOST_MPL_CFG_NO_PREPROCESSED_HEADERS)</div><div class="line">add_compile_definitions(BOOST_MPL_LIMIT_LIST_SIZE=30)</div></div><!-- fragment --><p> For a comprehensive example, please check the <a href="../demos/ros_examples/CMakeLists.txt"><code>CMakeLists.txt</code> of the ROS demos</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
